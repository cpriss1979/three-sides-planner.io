<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Protocol Handler</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        body {
            font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            padding: 1rem;
            margin: 0
        }
    </style>
</head>

<body>
    <p>Handling custom link…</p>
    <script>
        const base = location.pathname.startsWith('/three-sides-planner.io/') ? '/three-sides-planner.io/' : '/';
        const go = (path) => location.replace(base + path);

        // Handles web+threesides://… → protocol.html?url=%s
        const q = new URLSearchParams(location.search);
        const url = q.get('url') || '';

        try {
            const key = `inbox:protocol:${Date.now()}`;
            localStorage.setItem(key, JSON.stringify({ url }));
        } catch { }

        // Route to your app
        go('index.html');
    </script>
</body>

</html>